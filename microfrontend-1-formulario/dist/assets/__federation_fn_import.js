const S="[0-9A-Za-z-]+",g=`(?:\\+(${S}(?:\\.${S})*))`,R="0|[1-9]\\d*",T="[0-9]+",Z="\\d*[a-zA-Z-][a-zA-Z0-9-]*",X=`(?:${T}|${Z})`,N=`(?:-?(${X}(?:\\.${X})*))`,q=`(?:${R}|${Z})`,k=`(?:-(${q}(?:\\.${q})*))`,P=`${R}|x|X|\\*`,p=`[v=\\s]*(${P})(?:\\.(${P})(?:\\.(${P})(?:${k})?${g}?)?)?`,D=`^\\s*(${p})\\s+-\\s+(${p})\\s*$`,J=`(${T})\\.(${T})\\.(${T})`,M=`[v=\\s]*${J}${N}?${g}?`,h="((?:<|>)?=?)",Q=`(\\s*)${h}\\s*(${M}|${p})`,F="(?:~>?)",U=`(\\s*)${F}\\s+`,B="(?:\\^)",W=`(\\s*)${B}\\s+`,Y="(<|>)?=?\\s*\\*",A=`^${B}${p}$`,j=`(${R})\\.(${R})\\.(${R})`,m=`v?${j}${k}?${g}?`,ee=`^${F}${p}$`,re=`^${h}\\s*${p}$`,ne=`^${h}\\s*(${m})$|^$`,se="^\\s*>=\\s*0.0.0\\s*$";function o(e){return new RegExp(e)}function u(e){return!e||e.toLowerCase()==="x"||e==="*"}function G(...e){return s=>e.reduce((i,r)=>r(i),s)}function E(e){return e.match(o(ne))}function z(e,s,i,r){const n=`${e}.${s}.${i}`;return r?`${n}-${r}`:n}function te(e){return e.replace(o(D),(s,i,r,n,t,$,c,l,f,a,_,d)=>(u(r)?i="":u(n)?i=`>=${r}.0.0`:u(t)?i=`>=${r}.${n}.0`:i=`>=${i}`,u(f)?l="":u(a)?l=`<${+f+1}.0.0-0`:u(_)?l=`<${f}.${+a+1}.0-0`:d?l=`<=${f}.${a}.${_}-${d}`:l=`<=${l}`,`${i} ${l}`.trim()))}function ie(e){return e.replace(o(Q),"$1$2$3")}function $e(e){return e.replace(o(U),"$1~")}function ue(e){return e.replace(o(W),"$1^")}function ce(e){return e.trim().split(/\s+/).map(s=>s.replace(o(A),(i,r,n,t,$)=>u(r)?"":u(n)?`>=${r}.0.0 <${+r+1}.0.0-0`:u(t)?r==="0"?`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:`>=${r}.${n}.0 <${+r+1}.0.0-0`:$?r==="0"?n==="0"?`>=${r}.${n}.${t}-${$} <${r}.${n}.${+t+1}-0`:`>=${r}.${n}.${t}-${$} <${r}.${+n+1}.0-0`:`>=${r}.${n}.${t}-${$} <${+r+1}.0.0-0`:r==="0"?n==="0"?`>=${r}.${n}.${t} <${r}.${n}.${+t+1}-0`:`>=${r}.${n}.${t} <${r}.${+n+1}.0-0`:`>=${r}.${n}.${t} <${+r+1}.0.0-0`)).join(" ")}function le(e){return e.trim().split(/\s+/).map(s=>s.replace(o(ee),(i,r,n,t,$)=>u(r)?"":u(n)?`>=${r}.0.0 <${+r+1}.0.0-0`:u(t)?`>=${r}.${n}.0 <${r}.${+n+1}.0-0`:$?`>=${r}.${n}.${t}-${$} <${r}.${+n+1}.0-0`:`>=${r}.${n}.${t} <${r}.${+n+1}.0-0`)).join(" ")}function fe(e){return e.split(/\s+/).map(s=>s.trim().replace(o(re),(i,r,n,t,$,c)=>{const l=u(n),f=l||u(t),a=f||u($);return r==="="&&a&&(r=""),c="",l?r===">"||r==="<"?"<0.0.0-0":"*":r&&a?(f&&(t=0),$=0,r===">"?(r=">=",f?(n=+n+1,t=0,$=0):(t=+t+1,$=0)):r==="<="&&(r="<",f?n=+n+1:t=+t+1),r==="<"&&(c="-0"),`${r+n}.${t}.${$}${c}`):f?`>=${n}.0.0${c} <${+n+1}.0.0-0`:a?`>=${n}.${t}.0${c} <${n}.${+t+1}.0-0`:i})).join(" ")}function ae(e){return e.trim().replace(o(Y),"")}function oe(e){return e.trim().replace(o(se),"")}function V(e,s){return e=+e||e,s=+s||s,e>s?1:e===s?0:-1}function de(e,s){const{preRelease:i}=e,{preRelease:r}=s;if(i===void 0&&r)return 1;if(i&&r===void 0)return-1;if(i===void 0&&r===void 0)return 0;for(let n=0,t=i.length;n<=t;n++){const $=i[n],c=r[n];if($!==c)return $===void 0&&c===void 0?0:$?c?V($,c):-1:1}return 0}function v(e,s){return V(e.major,s.major)||V(e.minor,s.minor)||V(e.patch,s.patch)||de(e,s)}function b(e,s){return e.version===s.version}function pe(e,s){switch(e.operator){case"":case"=":return b(e,s);case">":return v(e,s)<0;case">=":return b(e,s)||v(e,s)<0;case"<":return v(e,s)>0;case"<=":return b(e,s)||v(e,s)>0;case void 0:return!0;default:return!1}}function Re(e){return G(ce,le,fe,ae)(e)}function _e(e){return G(te,ie,$e,ue)(e.trim()).split(/\s+/).join(" ")}function ve(e,s){if(!e)return!1;const n=_e(s).split(" ").map(d=>Re(d)).join(" ").split(/\s+/).map(d=>oe(d)),t=E(e);if(!t)return!1;const[,$,,c,l,f,a]=t,_={operator:$,version:z(c,l,f,a),major:c,minor:l,patch:f,preRelease:a?.split(".")};for(const d of n){const y=E(d);if(!y)return!1;const[,H,,I,L,O,C]=y,K={operator:H,version:z(I,L,O,C),major:I,minor:L,patch:O,preRelease:C?.split(".")};if(!pe(K,_))return!1}return!0}const w={},x=Object.create(null);async function we(e,s="default"){return x[e]?new Promise(i=>i(x[e])):await Te(e,s)||Ve(e)}async function Te(e,s){let i=null;if(globalThis?.__federation_shared__?.[s]?.[e]){const r=globalThis.__federation_shared__[s][e],n=Object.keys(r)[0],t=Object.values(r)[0];w[e]?.requiredVersion?ve(n,w[e].requiredVersion)?i=await(await t.get())():console.log(`provider support ${e}(${n}) is not satisfied requiredVersion(\${moduleMap[name].requiredVersion})`):i=await(await t.get())()}if(i)return i.default&&(i=i.default),x[e]=i,i}async function Ve(e){if(w[e]?.import){let s=await(await w[e].get())();return s.default&&(s=s.default),x[e]=s,s}else console.error("consumer config import=false,so cant use callback shared module")}export{we as importShared,Ve as importSharedLocal,Te as importSharedRuntime};
//# sourceMappingURL=__federation_fn_import.js.map
